var requirejs,require,define;!function(global,setTimeout){function commentReplace(e,l){return l||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,l){if(e){var t;for(t=0;t<e.length&&(!e[t]||!l(e[t],t,e));t+=1);}}function eachReverse(e,l){if(e){var t;for(t=e.length-1;t>-1&&(!e[t]||!l(e[t],t,e));t-=1);}}function hasProp(e,l){return hasOwn.call(e,l)}function getOwn(e,l){return hasProp(e,l)&&e[l]}function eachProp(e,l){var t;for(t in e)if(hasProp(e,t)&&l(e[t],t))break}function mixin(e,l,t,i){return l&&eachProp(l,function(l,n){!t&&hasProp(e,n)||(!i||"object"!=typeof l||!l||isArray(l)||isFunction(l)||l instanceof RegExp?e[n]=l:(e[n]||(e[n]={}),mixin(e[n],l,t,i)))}),e}function bind(e,l){return function(){return l.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var l=global;return each(e.split("."),function(e){l=l[e]}),l}function makeError(e,l,t,i){var n=new Error(l+"\nhttp://requirejs.org/docs/errors.html#"+e);return n.requireType=e,n.requireModules=i,t&&(n.originalError=t),n}function newContext(e){function l(e){var l,t;for(l=0;l<e.length;l++)if(t=e[l],"."===t)e.splice(l,1),l-=1;else if(".."===t){if(0===l||1===l&&".."===e[2]||".."===e[l-1])continue;l>0&&(e.splice(l-1,2),l-=2)}}function t(e,t,i){var n,r,a,o,s,m,h,c,d,p,u,f,x=t&&t.split("/"),g=M.map,E=g&&g["*"];if(e&&(e=e.split("/"),h=e.length-1,M.nodeIdCompat&&jsSuffixRegExp.test(e[h])&&(e[h]=e[h].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&x&&(f=x.slice(0,x.length-1),e=f.concat(e)),l(e),e=e.join("/")),i&&g&&(x||E)){a=e.split("/");e:for(o=a.length;o>0;o-=1){if(m=a.slice(0,o).join("/"),x)for(s=x.length;s>0;s-=1)if(r=getOwn(g,x.slice(0,s).join("/")),r&&(r=getOwn(r,m))){c=r,d=o;break e}!p&&E&&getOwn(E,m)&&(p=getOwn(E,m),u=o)}!c&&p&&(c=p,d=u),c&&(a.splice(0,d,c),e=a.join("/"))}return n=getOwn(M.pkgs,e),n?n:e}function i(e){isBrowser&&each(scripts(),function(l){if(l.getAttribute("data-requiremodule")===e&&l.getAttribute("data-requirecontext")===y.contextName)return l.parentNode.removeChild(l),!0})}function n(e){var l=getOwn(M.paths,e);if(l&&isArray(l)&&l.length>1)return l.shift(),y.require.undef(e),y.makeRequire(null,{skipMap:!0})([e]),!0}function r(e){var l,t=e?e.indexOf("!"):-1;return t>-1&&(l=e.substring(0,t),e=e.substring(t+1,e.length)),[l,e]}function a(e,l,i,n){var a,o,s,m,h=null,c=l?l.name:null,d=e,p=!0,u="";return e||(p=!1,e="_@r"+(k+=1)),m=r(e),h=m[0],e=m[1],h&&(h=t(h,c,n),o=getOwn(R,h)),e&&(h?u=o&&o.normalize?o.normalize(e,function(e){return t(e,c,n)}):e.indexOf("!")===-1?t(e,c,n):e:(u=t(e,c,n),m=r(u),h=m[0],u=m[1],i=!0,a=y.nameToUrl(u))),s=!h||o||i?"":"_unnormalized"+(O+=1),{prefix:h,name:u,parentMap:l,unnormalized:!!s,url:a,originalName:d,isDefine:p,id:(h?h+"!"+u:u)+s}}function o(e){var l=e.id,t=getOwn(b,l);return t||(t=b[l]=new y.Module(e)),t}function s(e,l,t){var i=e.id,n=getOwn(b,i);!hasProp(R,i)||n&&!n.defineEmitComplete?(n=o(e),n.error&&"error"===l?t(n.error):n.on(l,t)):"defined"===l&&t(R[i])}function m(e,l){var t=e.requireModules,i=!1;l?l(e):(each(t,function(l){var t=getOwn(b,l);t&&(t.error=e,t.events.error&&(i=!0,t.emit("error",e)))}),i||req.onError(e))}function h(){globalDefQueue.length&&(each(globalDefQueue,function(e){var l=e[0];"string"==typeof l&&(y.defQueueMap[l]=!0),z.push(e)}),globalDefQueue=[])}function c(e){delete b[e],delete S[e]}function d(e,l,t){var i=e.map.id;e.error?e.emit("error",e.error):(l[i]=!0,each(e.depMaps,function(i,n){var r=i.id,a=getOwn(b,r);!a||e.depMatched[n]||t[r]||(getOwn(l,r)?(e.defineDep(n,R[r]),e.check()):d(a,l,t))}),t[i]=!0)}function p(){var e,l,t=1e3*M.waitSeconds,r=t&&y.startTime+t<(new Date).getTime(),a=[],o=[],s=!1,h=!0;if(!E){if(E=!0,eachProp(S,function(e){var t=e.map,m=t.id;if(e.enabled&&(t.isDefine||o.push(e),!e.error))if(!e.inited&&r)n(m)?(l=!0,s=!0):(a.push(m),i(m));else if(!e.inited&&e.fetched&&t.isDefine&&(s=!0,!t.prefix))return h=!1}),r&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=y.contextName,m(e);h&&each(o,function(e){d(e,{},{})}),r&&!l||!s||!isBrowser&&!isWebWorker||_||(_=setTimeout(function(){_=0,p()},50)),E=!1}}function u(e){hasProp(R,e[0])||o(a(e[0],null,!0)).init(e[1],e[2])}function f(e,l,t,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,l):e.removeEventListener(t,l,!1)}function x(e){var l=e.currentTarget||e.srcElement;return f(l,y.onScriptLoad,"load","onreadystatechange"),f(l,y.onScriptError,"error"),{node:l,id:l&&l.getAttribute("data-requiremodule")}}function g(){var e;for(h();z.length;){if(e=z.shift(),null===e[0])return m(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));u(e)}y.defQueueMap={}}var E,w,y,v,_,M={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},b={},S={},T={},z=[],R={},H={},q={},k=1,O=1;return v={require:function(e){return e.require?e.require:e.require=y.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?R[e.map.id]=e.exports:e.exports=R[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(M.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},w=function(e){this.events=getOwn(T,e.id)||{},this.map=e,this.shim=getOwn(M.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},w.prototype={init:function(e,l,t,i){i=i||{},this.inited||(this.factory=l,t?this.on("error",t):this.events.error&&(t=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=t,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,l){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=l)},fetch:function(){if(!this.fetched){this.fetched=!0,y.startTime=(new Date).getTime();var e=this.map;return this.shim?void y.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;H[e]||(H[e]=!0,y.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,l,t=this.map.id,i=this.depExports,n=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(r)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{n=y.execCb(t,r,i,n)}catch(l){e=l}else n=y.execCb(t,r,i,n);if(this.map.isDefine&&void 0===n&&(l=this.module,l?n=l.exports:this.usingExports&&(n=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",m(this.error=e)}else n=r;if(this.exports=n,this.map.isDefine&&!this.ignore&&(R[t]=n,req.onResourceLoad)){var a=[];each(this.depMaps,function(e){a.push(e.normalizedMap||e)}),req.onResourceLoad(y,this.map,a)}c(t),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(y.defQueueMap,t)||this.fetch()}},callPlugin:function(){var e=this.map,l=e.id,i=a(e.prefix);this.depMaps.push(i),s(i,"defined",bind(this,function(i){var n,r,h,d=getOwn(q,this.map.id),p=this.map.name,u=this.map.parentMap?this.map.parentMap.name:null,f=y.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(p=i.normalize(p,function(e){return t(e,u,!0)})||""),r=a(e.prefix+"!"+p,this.map.parentMap),s(r,"defined",bind(this,function(e){this.map.normalizedMap=r,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),h=getOwn(b,r.id),void(h&&(this.depMaps.push(r),this.events.error&&h.on("error",bind(this,function(e){this.emit("error",e)})),h.enable()))):d?(this.map.url=y.nameToUrl(d),void this.load()):(n=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),n.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[l],eachProp(b,function(e){0===e.map.id.indexOf(l+"_unnormalized")&&c(e.map.id)}),m(e)}),n.fromText=bind(this,function(t,i){var r=e.name,s=a(r),h=useInteractive;i&&(t=i),h&&(useInteractive=!1),o(s),hasProp(M.config,l)&&(M.config[r]=M.config[l]);try{req.exec(t)}catch(e){return m(makeError("fromtexteval","fromText eval for "+l+" failed: "+e,e,[l]))}h&&(useInteractive=!0),this.depMaps.push(s),y.completeLoad(r),f([r],n)}),void i.load(e.name,f,n,M))})),y.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){S[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,l){var t,i,n;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[l]=e,n=getOwn(v,e.id))return void(this.depExports[l]=n(this));this.depCount+=1,s(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(l,e),this.check())})),this.errback?s(e,"error",bind(this,this.errback)):this.events.error&&s(e,"error",bind(this,function(e){this.emit("error",e)}))}t=e.id,i=b[t],hasProp(v,t)||!i||i.enabled||y.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var l=getOwn(b,e.id);l&&!l.enabled&&y.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,l){var t=this.events[e];t||(t=this.events[e]=[]),t.push(l)},emit:function(e,l){each(this.events[e],function(e){e(l)}),"error"===e&&delete this.events[e]}},y={config:M,contextName:e,registry:b,defined:R,urlFetched:H,defQueue:z,defQueueMap:{},Module:w,makeModuleMap:a,nextTick:req.nextTick,onError:m,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var l=e.urlArgs;e.urlArgs=function(e,t){return(t.indexOf("?")===-1?"?":"&")+l}}var t=M.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,l){i[l]?(M[l]||(M[l]={}),mixin(M[l],e,!0,!0)):M[l]=e}),e.bundles&&eachProp(e.bundles,function(e,l){each(e,function(e){e!==l&&(q[e]=l)})}),e.shim&&(eachProp(e.shim,function(e,l){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=y.makeShimExports(e)),t[l]=e}),M.shim=t),e.packages&&each(e.packages,function(e){var l,t;e="string"==typeof e?{name:e}:e,t=e.name,l=e.location,l&&(M.paths[t]=e.location),M.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(b,function(e,l){e.inited||e.map.unnormalized||(e.map=a(l,null,!0))}),(e.deps||e.callback)&&y.require(e.deps||[],e.callback)},makeShimExports:function(e){function l(){var l;return e.init&&(l=e.init.apply(global,arguments)),l||e.exports&&getGlobal(e.exports)}return l},makeRequire:function(l,n){function r(t,i,s){var h,c,d;return n.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof t?isFunction(i)?m(makeError("requireargs","Invalid require call"),s):l&&hasProp(v,t)?v[t](b[l.id]):req.get?req.get(y,t,l,r):(c=a(t,l,!1,!0),h=c.id,hasProp(R,h)?R[h]:m(makeError("notloaded",'Module name "'+h+'" has not been loaded yet for context: '+e+(l?"":". Use require([])")))):(g(),y.nextTick(function(){g(),d=o(a(null,l)),d.skipMap=n.skipMap,d.init(t,i,s,{enabled:!0}),p()}),r)}return n=n||{},mixin(r,{isBrowser:isBrowser,toUrl:function(e){var i,n=e.lastIndexOf("."),r=e.split("/")[0],a="."===r||".."===r;return n!==-1&&(!a||n>1)&&(i=e.substring(n,e.length),e=e.substring(0,n)),y.nameToUrl(t(e,l&&l.id,!0),i,!0)},defined:function(e){return hasProp(R,a(e,l,!1,!0).id)},specified:function(e){return e=a(e,l,!1,!0).id,hasProp(R,e)||hasProp(b,e)}}),l||(r.undef=function(e){h();var t=a(e,l,!0),n=getOwn(b,e);n.undefed=!0,i(e),delete R[e],delete H[t.url],delete T[e],eachReverse(z,function(l,t){l[0]===e&&z.splice(t,1)}),delete y.defQueueMap[e],n&&(n.events.defined&&(T[e]=n.events),c(e))}),r},enable:function(e){var l=getOwn(b,e.id);l&&o(e).enable()},completeLoad:function(e){var l,t,i,r=getOwn(M.shim,e)||{},a=r.exports;for(h();z.length;){if(t=z.shift(),null===t[0]){if(t[0]=e,l)break;l=!0}else t[0]===e&&(l=!0);u(t)}if(y.defQueueMap={},i=getOwn(b,e),!l&&!hasProp(R,e)&&i&&!i.inited){if(!(!M.enforceDefine||a&&getGlobal(a)))return n(e)?void 0:m(makeError("nodefine","No define call for "+e,null,[e]));u([e,r.deps||[],r.exportsFn])}p()},nameToUrl:function(e,l,t){var i,n,r,a,o,s,m,h=getOwn(M.pkgs,e);if(h&&(e=h),m=getOwn(q,e))return y.nameToUrl(m,l,t);if(req.jsExtRegExp.test(e))o=e+(l||"");else{for(i=M.paths,n=e.split("/"),r=n.length;r>0;r-=1)if(a=n.slice(0,r).join("/"),s=getOwn(i,a)){isArray(s)&&(s=s[0]),n.splice(0,r,s);break}o=n.join("/"),o+=l||(/^data\:|^blob\:|\?/.test(o)||t?"":".js"),o=("/"===o.charAt(0)||o.match(/^[\w\+\.\-]+:/)?"":M.baseUrl)+o}return M.urlArgs&&!/^blob\:/.test(o)?o+M.urlArgs(e,o):o},load:function(e,l){req.load(y,e,l)},execCb:function(e,l,t,i){return l.apply(i,t)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var l=x(e);y.completeLoad(l.id)}},onScriptError:function(e){var l=x(e);if(!n(l.id)){var t=[];return eachProp(b,function(e,i){0!==i.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===l.id)return t.push(i),!0})}),m(makeError("scripterror",'Script error for "'+l.id+(t.length?'", needed by: '+t.join(", "):'"'),e,[l.id]))}}},y.require=y.makeRequire(),y}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.2",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,l,t,i){var n,r,a=defContextName;return isArray(e)||"string"==typeof e||(r=e,isArray(l)?(e=l,l=t,t=i):e=[]),r&&r.context&&(a=r.context),n=getOwn(contexts,a),n||(n=contexts[a]=req.s.newContext(a)),r&&n.configure(r),n.require(e,l,t)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var l=contexts[defContextName];return l.require[e].apply(l,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,l,t){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=e.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(e,l,t){var i,n=e&&e.config||{};if(isBrowser)return i=req.createNode(n,l,t),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",l),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=t,n.onNodeCreated&&n.onNodeCreated(i,n,l,t),currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{setTimeout(function(){},0),importScripts(t),e.completeLoad(l)}catch(i){e.onError(makeError("importscripts","importScripts failed for "+l+" at "+t,i,[l]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||mainScript.indexOf("!")!==-1||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,l,t){var i,n;"string"!=typeof e&&(t=l,l=e,e=null),isArray(l)||(t=l,l=null),!l&&isFunction(t)&&(l=[],t.length&&(t.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,t){l.push(t)}),l=(1===t.length?["require"]:["require","exports","module"]).concat(l))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(e||(e=i.getAttribute("data-requiremodule")),n=contexts[i.getAttribute("data-requirecontext")])),n?(n.defQueue.push([e,l,t]),n.defQueueMap[e]=!0):globalDefQueue.push([e,l,t])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),define("requireLib",function(){}),define("game/modules/scene",[],function(){var e,l,t,i,n,r,a,o,s,m,h=function(){return s=window.innerHeight,m=window.innerWidth,e=new THREE.Scene,i=m/s,t=60,n=1,r=1e4,l=new THREE.PerspectiveCamera(t,i,n,r),l.position.x=-30,l.position.z=130,l.position.y=100,e.fog=new THREE.Fog(2016515,.5,450),a=new THREE.WebGLRenderer({alpha:!0,antialias:!1}),a.setSize(m,s),a.shadowMap.enabled=!0,o=document.getElementById("game"),o.appendChild(a.domElement),window.addEventListener("resize",c,!1),{scene:e,renderer:a,camera:l,WIDTH:m,HEIGHT:s}},c=function(){s=window.innerHeight,m=window.innerWidth,a.setSize(m,s),l.aspect=m/s,l.updateProjectionMatrix()};return{createScene:h,scene:e,camera:l}}),define("game/modules/lights",["./scene"],function(e){function l(){i=new THREE.HemisphereLight(11184810,0,.9),t=new THREE.AmbientLight(14452852,.5),n=new THREE.DirectionalLight(16777215,.9),n.position.set(150,350,350),n.castShadow=!0,n.shadow.camera.left=-400,n.shadow.camera.right=400,n.shadow.camera.top=400,n.shadow.camera.bottom=-400,n.shadow.camera.near=1,n.shadow.camera.far=1e3,n.shadow.mapSize.width=2048,n.shadow.mapSize.height=2048,e.scene.add(i),e.scene.add(n),e.scene.add(t)}var t,i,n;return{createLights:l}}),define("game/modules/colors",[],function(){return{grey:11119017,white:16777215,skin:16766377,hair:16765696,black:5000268,green:2016515,blue:42239}}),define("game/modules/player",["./scene","./colors"],function(e,l){var t=function(){this.mesh=new THREE.Group,this.mesh.name="hacker";var e=new THREE.CubeGeometry(10,10,10),t=new THREE.MeshPhongMaterial({color:l.grey,shading:THREE.FlatShading}),i=new THREE.Mesh(e,t);i.castShadow=!0,i.receiveShadow=!0,this.mesh.add(i),i.position.x+=5;var n=new THREE.CubeGeometry(10,10,20),r=new THREE.Mesh(n,t);r.castShadow=!0,r.receiveShadow=!0,this.mesh.add(r),r.position.x+=5,r.position.y+=10,r.position.z+=5;var a=new THREE.Mesh(e,t);a.castShadow=!0,a.receiveShadow=!0,a.position.x-=15,this.mesh.add(a);var o=new THREE.Mesh(n,t);o.castShadow=!0,o.receiveShadow=!0,this.mesh.add(o),o.position.y+=10,o.position.z+=5,o.position.x-=15;var s=new THREE.CubeGeometry(30,20,30),m=new THREE.Mesh(s,t);m.castShadow=!0,m.receiveShadow=!0,this.mesh.add(m),m.position.y+=25,m.position.x-=5,m.position.z+=10;var h=new THREE.CubeGeometry(20,10,10),c=new THREE.MeshPhongMaterial({color:l.skin,shading:THREE.FlatShading}),d=new THREE.Mesh(h,c);d.castShadow=!0,d.receiveShadow=!0,this.mesh.add(d),d.position.y+=40,d.position.x-=5,d.position.z+=15;var p=new THREE.CubeGeometry(10,10,30),u=new THREE.MeshPhongMaterial({color:l.white,shading:THREE.FlatShading}),f=new THREE.Mesh(p,u);f.castShadow=!0,f.receiveShadow=!0,this.mesh.add(f),f.position.y+=40,f.position.x-=15,f.position.z+=10;var x=f.clone();x.position.x+=20,this.mesh.add(x);var g=f.clone();g.rotation.y+=Math.PI/2,g.position.z-=10,g.position.x+=10,this.mesh.add(g);var E=new THREE.CubeGeometry(50,50,40),w=new THREE.Mesh(E,c);w.castShadow=!0,w.receiveShadow=!0,this.mesh.add(w),w.position.y+=70,w.position.x-=5,w.position.z+=10,this.head=w;var y=new THREE.MeshPhongMaterial({color:l.black,shading:THREE.FlatShading}),v=new THREE.CubeGeometry(30,30,10),_=new THREE.Mesh(v,y);_.castShadow=!0,_.receiveShadow=!0,this.mesh.add(_),_.position.y+=70,_.position.x-=25,_.position.z+=35;var M=_.clone();this.mesh.add(M),M.position.x+=40;var b=_.clone();this.mesh.add(b),b.position.x+=20,b.scale.set(.4,.4,1);var S=new THREE.CubeGeometry(10,10,10),T=new THREE.Mesh(S,u);T.castShadow=!0,T.receiveShadow=!0,this.mesh.add(T),T.position.y+=70,T.position.x-=25,T.position.z+=36;var z=T.clone();this.mesh.add(z),z.position.x+=40;var R=new THREE.MeshPhongMaterial({color:l.hair,shading:THREE.FlatShading}),H=new THREE.CubeGeometry(70,10,50),q=new THREE.Mesh(H,R);q.castShadow=!0,q.receiveShadow=!0,this.mesh.add(q),q.position.y+=100,q.position.x-=5,q.position.z+=5;var k=new THREE.CubeGeometry(70,30,30),O=new THREE.Mesh(k,R);O.castShadow=!0,O.receiveShadow=!0,this.mesh.add(O),O.position.y+=85,O.position.x-=5,O.position.z-=5;var P=new THREE.CubeGeometry(50,10,10),j=new THREE.Mesh(P,R);j.castShadow=!0,j.receiveShadow=!0,this.mesh.add(j),j.position.y+=110,j.position.x-=5,j.position.z+=5;var C=new THREE.CubeGeometry(10,10,10),F=new THREE.Mesh(C,R);F.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(0,5,0));var A;F.position.y=A=95,F.position.z=35,F.position.x=25,F.basicY=95,this.fringe=new THREE.Object3D;for(var D=0;D<7;D++){var L=F.clone();L.position.x-=10*D,this.fringe.add(L)}this.mesh.add(this.fringe);var G=this,B=0,N=function(){var e=G.fringe.children;e.forEach(function(e,l){e.position.y=A+5*(.5+.5*Math.cos(B+l/3))}),B+=.16},I=function(){var e=G.fringe.children;e.forEach(function(e,l){e.position.y=A})};this.isJumping=!1,this.isFalling=!1,this.jumpSpeed=0,this.fallSpeed=0,this.maxJumpSpeed=6.5,this.jump=function(){this.isJumping||this.isFalling||(this.fallSpeed=0,this.isJumping=!0,this.jumpSpeed=this.maxJumpSpeed)},this.checkJump=function(){I(),this.mesh.position.y>80?this.moveRest=!0:(this.moveRest=!1,this.mesh.position.y+=this.jumpSpeed),this.jumpSpeed-=.5,0===this.jumpSpeed&&(this.isJumping=!1,this.isFalling=!0,this.fallSpeed=1)},this.fallStop=function(){this.isFalling=!1,this.fallSpeed=0,this.jump()},this.checkFall=function(){N(),this.mesh.position.y-=this.fallSpeed,this.fallSpeed+=.5},this.moveRight=function(){this.mesh.position.x<10&&TweenMax.to(this.mesh.position,.2,{x:this.mesh.position.x+10}),this.mesh.position.x>-25&&this.mesh.rotation.y>0&&TweenMax.to(this.mesh.rotation,.6,{y:-.9})},this.moveLeft=function(){this.mesh.position.x>-70&&TweenMax.to(this.mesh.position,.2,{x:this.mesh.position.x-10}),this.mesh.position.x<-25&&this.mesh.rotation.y<0&&TweenMax.to(this.mesh.rotation,.6,{y:.9})},this.checkOrientation=function(e,l){e<l?TweenMax.to(this.mesh.rotation,.6,{y:.9}):e>l?TweenMax.to(this.mesh.rotation,.6,{y:-.9}):TweenMax.to(this.mesh.rotation,.3,{y:0})}},i=function(){return player=new t,player.mesh.scale.set(.45,.45,.45),player.mesh.position.y=65,player.mesh.position.x-=30,player.mesh.position.z=60,player.mesh.rotation.y=-.3,e.scene.add(player.mesh),player};return{createPlayer:i}}),define("game/modules/font",[],function(){return{glyphs:{0:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 661 l 331 661 l 331 827 l 827 827 l 827 661 l 992 661 l 992 165 l 827 165 l 827 0 l 331 0 m 496 165 l 661 165 l 661 661 l 496 661 l 496 165 z "},1:{ha:992,x_min:165,x_max:827,o:"m 331 661 l 165 661 l 165 827 l 661 827 l 661 165 l 827 165 l 827 0 l 165 0 l 165 165 l 331 165 l 331 661 z "},2:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 331 l 331 331 l 331 496 l 661 496 l 661 661 l 165 661 l 165 827 l 827 827 l 827 661 l 992 661 l 992 496 l 827 496 l 827 331 l 496 331 l 496 165 l 992 165 l 992 0 l 165 0 z "},3:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 165 l 661 165 l 661 331 l 331 331 l 331 496 l 661 496 l 661 661 l 165 661 l 165 827 l 827 827 l 827 661 l 992 661 l 992 496 l 827 496 l 827 331 l 992 331 l 992 165 l 827 165 l 827 0 l 165 0 z "},4:{ha:1157,x_min:165,x_max:992,o:"m 165 827 l 165 165 l 496 165 l 496 0 l 827 0 l 827 165 l 992 165 l 992 331 l 827 331 l 827 827 l 165 827 z "},5:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 165 l 661 165 l 661 331 l 165 331 l 165 827 l 992 827 l 992 661 l 496 661 l 496 496 l 827 496 l 827 331 l 992 331 l 992 165 l 827 165 l 827 0 l 165 0 z "},6:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 661 l 331 661 l 331 827 l 827 827 l 827 661 l 496 661 l 496 496 l 827 496 l 827 331 l 992 331 l 992 165 l 827 165 l 827 0 l 331 0 m 496 165 l 661 165 l 661 331 l 496 331 l 496 165 z "},7:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 331 l 496 331 l 496 496 l 661 496 l 661 661 l 165 661 l 165 827 l 992 827 l 992 496 l 827 496 l 827 331 l 661 331 l 661 0 l 331 0 z "},8:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 331 l 331 331 l 331 496 l 165 496 l 165 661 l 331 661 l 331 827 l 827 827 l 827 661 l 992 661 l 992 496 l 827 496 l 827 331 l 992 331 l 992 165 l 827 165 l 827 0 l 331 0 m 496 496 l 661 496 l 661 661 l 496 661 l 496 496 m 496 165 l 661 165 l 661 331 l 496 331 l 496 165 z "},9:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 661 165 l 661 331 l 331 331 l 331 496 l 165 496 l 165 661 l 331 661 l 331 827 l 827 827 l 827 661 l 992 661 l 992 165 l 827 165 l 827 0 l 331 0 m 496 496 l 661 496 l 661 661 l 496 661 l 496 496 z "}," ":{ha:827,x_min:0,x_max:0,o:""},"!":{ha:661,x_min:165,x_max:496,o:"m 165 331 l 165 827 l 496 827 l 496 331 l 165 331 m 165 165 l 496 165 l 496 0 l 165 0 l 165 165 z "},'"':{ha:992,x_min:165,x_max:827,o:"m 827 496 l 165 496 l 165 827 l 827 827 l 827 496 z "},"#":{ha:1323,x_min:165,x_max:1157,o:"m 331 0 l 331 165 l 165 165 l 165 331 l 331 331 l 331 496 l 165 496 l 165 661 l 331 661 l 331 827 l 992 827 l 992 661 l 1157 661 l 1157 496 l 992 496 l 992 331 l 1157 331 l 1157 165 l 992 165 l 992 0 l 331 0 z "},$:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 165 l 661 165 l 661 331 l 331 331 l 331 496 l 165 496 l 165 661 l 331 661 l 331 827 l 496 827 l 496 992 l 827 992 l 827 827 l 992 827 l 992 661 l 496 661 l 496 496 l 827 496 l 827 331 l 992 331 l 992 0 l 661 0 l 661 -165 l 331 -165 l 331 0 l 165 0 z "},"%":{ha:1323,x_min:165,x_max:1157,o:"m 331 0 l 331 331 l 496 331 l 496 496 l 165 496 l 165 827 l 992 827 l 992 496 l 827 496 l 827 331 l 1157 331 l 1157 0 l 331 0 z "},"&":{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 331 l 331 331 l 331 496 l 165 496 l 165 661 l 331 661 l 331 827 l 496 827 l 496 992 l 827 992 l 827 827 l 992 827 l 992 661 l 496 661 l 496 496 l 827 496 l 827 331 l 496 331 l 496 165 l 992 165 l 992 0 l 827 0 l 827 -165 l 496 -165 l 496 0 l 331 0 z "},"'":{ha:661,x_min:165,x_max:496,o:"m 496 496 l 165 496 l 165 827 l 496 827 l 496 496 z "},"(":{ha:827,x_min:165,x_max:661,o:"m 331 0 l 331 165 l 165 165 l 165 661 l 331 661 l 331 827 l 661 827 l 661 661 l 496 661 l 496 165 l 661 165 l 661 0 l 331 0 z "},")":{ha:827,x_min:165,x_max:661,o:"m 661 165 l 496 165 l 496 0 l 165 0 l 165 165 l 331 165 l 331 661 l 165 661 l 165 827 l 496 827 l 496 661 l 661 661 l 661 165 z "},"*":{ha:1323,x_min:165,x_max:1157,o:"m 496 0 l 496 165 l 165 165 l 165 331 l 331 331 l 331 496 l 165 496 l 165 661 l 496 661 l 496 827 l 827 827 l 827 661 l 1157 661 l 1157 496 l 992 496 l 992 331 l 1157 331 l 1157 165 l 827 165 l 827 0 l 496 0 z "},"+":{ha:1323,x_min:165,x_max:1157,o:"m 165 331 l 496 331 l 496 0 l 827 0 l 827 331 l 1157 331 l 1157 496 l 827 496 l 827 827 l 496 827 l 496 496 l 165 496 l 165 331 z "},",":{ha:661,x_min:0,x_max:496,o:"m 165 0 l 165 165 l 496 165 l 496 0 l 331 0 l 331 -165 l 0 -165 l 0 0 l 165 0 z "},"-":{ha:992,x_min:165,x_max:827,o:"m 827 331 l 165 331 l 165 496 l 827 496 l 827 331 z "},".":{ha:496,x_min:0,x_max:331,o:"m 0 165 l 331 165 l 331 0 l 0 0 l 0 165 z "},"/":{ha:992,x_min:165,x_max:827,o:"m 165 0 l 165 331 l 331 331 l 331 496 l 496 496 l 496 827 l 827 827 l 827 496 l 661 496 l 661 331 l 496 331 l 496 0 l 165 0 z "},":":{ha:496,x_min:0,x_max:331,o:"m 0 331 l 331 331 l 331 165 l 0 165 l 0 331 m 0 661 l 331 661 l 331 496 l 0 496 l 0 661 z "},";":{ha:661,x_min:0,x_max:496,o:"m 165 661 l 496 661 l 496 496 l 165 496 l 165 661 m 165 165 l 165 331 l 496 331 l 496 165 l 331 165 l 331 0 l 0 0 l 0 165 l 165 165 z "},"<":{ha:992,x_min:165,x_max:827,o:"m 496 0 l 496 165 l 331 165 l 331 331 l 165 331 l 165 496 l 331 496 l 331 661 l 496 661 l 496 827 l 827 827 l 827 661 l 661 661 l 661 496 l 496 496 l 496 331 l 661 331 l 661 165 l 827 165 l 827 0 l 496 0 z "},"=":{ha:992,x_min:165,x_max:827,o:"m 827 165 l 165 165 l 165 331 l 827 331 l 827 165 m 827 496 l 165 496 l 165 661 l 827 661 l 827 496 z "},">":{ha:992,x_min:165,x_max:827,o:"m 827 331 l 661 331 l 661 165 l 496 165 l 496 0 l 165 0 l 165 165 l 331 165 l 331 331 l 496 331 l 496 496 l 331 496 l 331 661 l 165 661 l 165 827 l 496 827 l 496 661 l 661 661 l 661 496 l 827 496 l 827 331 z "},"?":{ha:1157,x_min:165,x_max:992,o:"m 331 165 l 661 165 l 661 0 l 331 0 l 331 165 m 331 331 l 331 496 l 661 496 l 661 661 l 165 661 l 165 827 l 827 827 l 827 661 l 992 661 l 992 496 l 827 496 l 827 331 l 331 331 z "},"@":{ha:1323,x_min:165,x_max:1157,o:"m 331 0 m 496 331 l 992 331 l 992 496 l 1157 496 l 1157 661 l 992 661 l 992 827 l 331 827 l 331 661 l 165 661 l 165 165 l 331 165 l 331 0 l 992 0 l 992 165 l 496 165 l 496 331 z "},A:{ha:1157,x_min:165,x_max:992,o:"m 827 661 l 992 661 l 992 0 l 661 0 l 661 331 l 496 331 l 496 0 l 165 0 l 165 661 l 331 661 l 331 827 l 827 827 l 827 661 m 496 496 l 661 496 l 661 661 l 496 661 l 496 496 z "},B:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 827 l 827 827 l 827 661 l 992 661 l 992 496 l 827 496 l 827 331 l 992 331 l 992 165 l 827 165 l 827 0 l 165 0 m 496 496 l 661 496 l 661 661 l 496 661 l 496 496 m 496 165 l 661 165 l 661 331 l 496 331 l 496 165 z "},C:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 661 l 331 661 l 331 827 l 827 827 l 827 661 l 992 661 l 992 496 l 661 496 l 661 661 l 496 661 l 496 165 l 661 165 l 661 331 l 992 331 l 992 165 l 827 165 l 827 0 l 331 0 z "},D:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 827 l 827 827 l 827 661 l 992 661 l 992 165 l 827 165 l 827 0 l 165 0 m 661 661 l 496 661 l 496 165 l 661 165 l 661 661 z "},E:{ha:992,x_min:165,x_max:827,o:"m 827 661 l 496 661 l 496 496 l 827 496 l 827 331 l 496 331 l 496 165 l 827 165 l 827 0 l 165 0 l 165 827 l 827 827 l 827 661 z "},F:{ha:992,x_min:165,x_max:827,o:"m 165 0 l 165 827 l 827 827 l 827 661 l 496 661 l 496 496 l 827 496 l 827 331 l 496 331 l 496 0 l 165 0 z "},G:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 661 l 331 661 l 331 827 l 992 827 l 992 661 l 496 661 l 496 165 l 661 165 l 661 496 l 992 496 l 992 165 l 827 165 l 827 0 l 331 0 z "},H:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 827 l 496 827 l 496 496 l 661 496 l 661 827 l 992 827 l 992 0 l 661 0 l 661 331 l 496 331 l 496 0 l 165 0 z "},I:{ha:661,x_min:165,x_max:496,o:"m 165 0 l 165 827 l 496 827 l 496 0 l 165 0 z "},J:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 331 l 496 331 l 496 165 l 661 165 l 661 827 l 992 827 l 992 165 l 827 165 l 827 0 l 331 0 z "},K:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 827 l 496 827 l 496 661 l 661 661 l 661 827 l 992 827 l 992 661 l 827 661 l 827 496 l 661 496 l 661 331 l 827 331 l 827 165 l 992 165 l 992 0 l 661 0 l 661 165 l 496 165 l 496 0 l 165 0 z "
},L:{ha:992,x_min:165,x_max:827,o:"m 496 165 l 827 165 l 827 0 l 165 0 l 165 827 l 496 827 l 496 165 z "},M:{ha:1323,x_min:165,x_max:1157,o:"m 165 0 l 165 827 l 496 827 l 496 661 l 827 661 l 827 827 l 1157 827 l 1157 0 l 827 0 l 827 331 l 496 331 l 496 0 l 165 0 z "},N:{ha:1323,x_min:165,x_max:1157,o:"m 165 0 l 165 827 l 496 827 l 496 661 l 661 661 l 661 496 l 827 496 l 827 827 l 1157 827 l 1157 0 l 827 0 l 827 165 l 661 165 l 661 331 l 496 331 l 496 0 l 165 0 z "},O:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 661 l 331 661 l 331 827 l 827 827 l 827 661 l 992 661 l 992 165 l 827 165 l 827 0 l 331 0 m 496 165 l 661 165 l 661 661 l 496 661 l 496 165 z "},P:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 827 l 827 827 l 827 661 l 992 661 l 992 496 l 827 496 l 827 331 l 496 331 l 496 0 l 165 0 m 496 496 l 661 496 l 661 661 l 496 661 l 496 496 z "},Q:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 661 l 331 661 l 331 827 l 827 827 l 827 661 l 992 661 l 992 165 l 827 165 l 827 0 l 992 0 l 992 -165 l 661 -165 l 661 0 l 331 0 m 496 165 l 661 165 l 661 661 l 496 661 l 496 165 z "},R:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 827 l 827 827 l 827 661 l 992 661 l 992 496 l 827 496 l 827 165 l 992 165 l 992 0 l 661 0 l 661 165 l 496 165 l 496 0 l 165 0 m 496 496 l 661 496 l 661 661 l 496 661 l 496 496 z "},S:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 165 l 661 165 l 661 331 l 331 331 l 331 496 l 165 496 l 165 661 l 331 661 l 331 827 l 992 827 l 992 661 l 496 661 l 496 496 l 827 496 l 827 331 l 992 331 l 992 165 l 827 165 l 827 0 l 165 0 z "},T:{ha:992,x_min:165,x_max:827,o:"m 331 0 l 331 661 l 165 661 l 165 827 l 827 827 l 827 661 l 661 661 l 661 0 l 331 0 z "},U:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 827 l 496 827 l 496 165 l 661 165 l 661 827 l 992 827 l 992 165 l 827 165 l 827 0 l 331 0 z "},V:{ha:1323,x_min:165,x_max:1157,o:"m 496 0 l 496 165 l 331 165 l 331 496 l 165 496 l 165 827 l 496 827 l 496 496 l 827 496 l 827 827 l 1157 827 l 1157 496 l 992 496 l 992 165 l 827 165 l 827 0 l 496 0 z "},W:{ha:1323,x_min:165,x_max:1157,o:"m 331 0 l 331 165 l 165 165 l 165 827 l 496 827 l 496 661 l 827 661 l 827 827 l 1157 827 l 1157 165 l 992 165 l 992 0 l 331 0 z "},X:{ha:1323,x_min:165,x_max:1157,o:"m 165 0 l 165 165 l 331 165 l 331 331 l 496 331 l 496 496 l 331 496 l 331 661 l 165 661 l 165 827 l 496 827 l 496 661 l 827 661 l 827 827 l 1157 827 l 1157 661 l 992 661 l 992 496 l 827 496 l 827 331 l 992 331 l 992 165 l 1157 165 l 1157 0 l 827 0 l 827 165 l 496 165 l 496 0 l 165 0 z "},Y:{ha:1323,x_min:165,x_max:1157,o:"m 496 0 l 496 496 l 331 496 l 331 661 l 165 661 l 165 827 l 496 827 l 496 661 l 827 661 l 827 827 l 1157 827 l 1157 661 l 992 661 l 992 496 l 827 496 l 827 0 l 496 0 z "},Z:{ha:992,x_min:165,x_max:827,o:"m 165 0 l 165 331 l 331 331 l 331 496 l 496 496 l 496 661 l 165 661 l 165 827 l 827 827 l 827 496 l 661 496 l 661 331 l 496 331 l 496 165 l 827 165 l 827 0 l 165 0 z "},"[":{ha:827,x_min:165,x_max:661,o:"m 165 0 l 165 827 l 661 827 l 661 661 l 496 661 l 496 165 l 661 165 l 661 0 l 165 0 z "},"\\":{ha:992,x_min:165,x_max:827,o:"m 496 0 l 496 331 l 331 331 l 331 496 l 165 496 l 165 827 l 496 827 l 496 496 l 661 496 l 661 331 l 827 331 l 827 0 l 496 0 z "},"]":{ha:827,x_min:165,x_max:661,o:"m 661 0 l 165 0 l 165 165 l 331 165 l 331 661 l 165 661 l 165 827 l 661 827 l 661 0 z "},"^":{ha:992,x_min:165,x_max:827,o:"m 165 496 l 165 661 l 331 661 l 331 827 l 661 827 l 661 661 l 827 661 l 827 496 l 165 496 z "},_:{ha:1157,x_min:165,x_max:992,o:"m 992 -165 l 165 -165 l 165 0 l 992 0 l 992 -165 z "},"`":{ha:827,x_min:165,x_max:661,o:"m 331 496 l 331 661 l 165 661 l 165 827 l 496 827 l 496 661 l 661 661 l 661 496 l 331 496 z "},a:{ha:1157,x_min:165,x_max:992,o:"m 827 661 l 992 661 l 992 0 l 661 0 l 661 331 l 496 331 l 496 0 l 165 0 l 165 661 l 331 661 l 331 827 l 827 827 l 827 661 m 496 496 l 661 496 l 661 661 l 496 661 l 496 496 z "},b:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 827 l 827 827 l 827 661 l 992 661 l 992 496 l 827 496 l 827 331 l 992 331 l 992 165 l 827 165 l 827 0 l 165 0 m 496 496 l 661 496 l 661 661 l 496 661 l 496 496 m 496 165 l 661 165 l 661 331 l 496 331 l 496 165 z "},c:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 661 l 331 661 l 331 827 l 827 827 l 827 661 l 992 661 l 992 496 l 661 496 l 661 661 l 496 661 l 496 165 l 661 165 l 661 331 l 992 331 l 992 165 l 827 165 l 827 0 l 331 0 z "},d:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 827 l 827 827 l 827 661 l 992 661 l 992 165 l 827 165 l 827 0 l 165 0 m 661 661 l 496 661 l 496 165 l 661 165 l 661 661 z "},e:{ha:992,x_min:165,x_max:827,o:"m 827 661 l 496 661 l 496 496 l 827 496 l 827 331 l 496 331 l 496 165 l 827 165 l 827 0 l 165 0 l 165 827 l 827 827 l 827 661 z "},f:{ha:992,x_min:165,x_max:827,o:"m 165 0 l 165 827 l 827 827 l 827 661 l 496 661 l 496 496 l 827 496 l 827 331 l 496 331 l 496 0 l 165 0 z "},g:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 661 l 331 661 l 331 827 l 992 827 l 992 661 l 496 661 l 496 165 l 661 165 l 661 496 l 992 496 l 992 165 l 827 165 l 827 0 l 331 0 z "},h:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 827 l 496 827 l 496 496 l 661 496 l 661 827 l 992 827 l 992 0 l 661 0 l 661 331 l 496 331 l 496 0 l 165 0 z "},i:{ha:661,x_min:165,x_max:496,o:"m 165 0 l 165 827 l 496 827 l 496 0 l 165 0 z "},j:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 331 l 496 331 l 496 165 l 661 165 l 661 827 l 992 827 l 992 165 l 827 165 l 827 0 l 331 0 z "},k:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 827 l 496 827 l 496 661 l 661 661 l 661 827 l 992 827 l 992 661 l 827 661 l 827 496 l 661 496 l 661 331 l 827 331 l 827 165 l 992 165 l 992 0 l 661 0 l 661 165 l 496 165 l 496 0 l 165 0 z "},l:{ha:992,x_min:165,x_max:827,o:"m 496 165 l 827 165 l 827 0 l 165 0 l 165 827 l 496 827 l 496 165 z "},m:{ha:1323,x_min:165,x_max:1157,o:"m 165 0 l 165 827 l 496 827 l 496 661 l 827 661 l 827 827 l 1157 827 l 1157 0 l 827 0 l 827 331 l 496 331 l 496 0 l 165 0 z "},n:{ha:1323,x_min:165,x_max:1157,o:"m 165 0 l 165 827 l 496 827 l 496 661 l 661 661 l 661 496 l 827 496 l 827 827 l 1157 827 l 1157 0 l 827 0 l 827 165 l 661 165 l 661 331 l 496 331 l 496 0 l 165 0 z "},o:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 661 l 331 661 l 331 827 l 827 827 l 827 661 l 992 661 l 992 165 l 827 165 l 827 0 l 331 0 m 496 165 l 661 165 l 661 661 l 496 661 l 496 165 z "},p:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 827 l 827 827 l 827 661 l 992 661 l 992 496 l 827 496 l 827 331 l 496 331 l 496 0 l 165 0 m 496 496 l 661 496 l 661 661 l 496 661 l 496 496 z "},q:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 661 l 331 661 l 331 827 l 827 827 l 827 661 l 992 661 l 992 165 l 827 165 l 827 0 l 992 0 l 992 -165 l 661 -165 l 661 0 l 331 0 m 496 165 l 661 165 l 661 661 l 496 661 l 496 165 z "},r:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 827 l 827 827 l 827 661 l 992 661 l 992 496 l 827 496 l 827 165 l 992 165 l 992 0 l 661 0 l 661 165 l 496 165 l 496 0 l 165 0 m 496 496 l 661 496 l 661 661 l 496 661 l 496 496 z "},s:{ha:1157,x_min:165,x_max:992,o:"m 165 0 l 165 165 l 661 165 l 661 331 l 331 331 l 331 496 l 165 496 l 165 661 l 331 661 l 331 827 l 992 827 l 992 661 l 496 661 l 496 496 l 827 496 l 827 331 l 992 331 l 992 165 l 827 165 l 827 0 l 165 0 z "},t:{ha:992,x_min:165,x_max:827,o:"m 331 0 l 331 661 l 165 661 l 165 827 l 827 827 l 827 661 l 661 661 l 661 0 l 331 0 z "},u:{ha:1157,x_min:165,x_max:992,o:"m 331 0 l 331 165 l 165 165 l 165 827 l 496 827 l 496 165 l 661 165 l 661 827 l 992 827 l 992 165 l 827 165 l 827 0 l 331 0 z "},v:{ha:1323,x_min:165,x_max:1157,o:"m 496 0 l 496 165 l 331 165 l 331 496 l 165 496 l 165 827 l 496 827 l 496 496 l 827 496 l 827 827 l 1157 827 l 1157 496 l 992 496 l 992 165 l 827 165 l 827 0 l 496 0 z "},w:{ha:1323,x_min:165,x_max:1157,o:"m 331 0 l 331 165 l 165 165 l 165 827 l 496 827 l 496 661 l 827 661 l 827 827 l 1157 827 l 1157 165 l 992 165 l 992 0 l 331 0 z "},x:{ha:1323,x_min:165,x_max:1157,o:"m 165 0 l 165 165 l 331 165 l 331 331 l 496 331 l 496 496 l 331 496 l 331 661 l 165 661 l 165 827 l 496 827 l 496 661 l 827 661 l 827 827 l 1157 827 l 1157 661 l 992 661 l 992 496 l 827 496 l 827 331 l 992 331 l 992 165 l 1157 165 l 1157 0 l 827 0 l 827 165 l 496 165 l 496 0 l 165 0 z "},y:{ha:1323,x_min:165,x_max:1157,o:"m 496 0 l 496 496 l 331 496 l 331 661 l 165 661 l 165 827 l 496 827 l 496 661 l 827 661 l 827 827 l 1157 827 l 1157 661 l 992 661 l 992 496 l 827 496 l 827 0 l 496 0 z "},z:{ha:992,x_min:165,x_max:827,o:"m 165 0 l 165 331 l 331 331 l 331 496 l 496 496 l 496 661 l 165 661 l 165 827 l 827 827 l 827 496 l 661 496 l 661 331 l 496 331 l 496 165 l 827 165 l 827 0 l 165 0 z "},"{":{ha:992,x_min:165,x_max:827,o:"m 331 0 l 331 331 l 165 331 l 165 496 l 331 496 l 331 827 l 827 827 l 827 661 l 661 661 l 661 496 l 496 496 l 496 331 l 661 331 l 661 165 l 827 165 l 827 0 l 331 0 z "},"|":{ha:661,x_min:165,x_max:496,o:"m 165 -165 l 165 992 l 496 992 l 496 -165 l 165 -165 z "},"}":{ha:992,x_min:165,x_max:827,o:"m 827 331 l 661 331 l 661 0 l 165 0 l 165 165 l 331 165 l 331 331 l 496 331 l 496 496 l 331 496 l 331 661 l 165 661 l 165 827 l 661 827 l 661 496 l 827 496 l 827 331 z "},"~":{ha:1157,x_min:165,x_max:992,o:"m 165 496 l 165 661 l 331 661 l 331 827 l 992 827 l 992 661 l 827 661 l 827 496 l 165 496 z "}},familyName:"Silkscreen",ascender:1058,descender:-331,underlinePosition:-133,underlineThickness:20,boundingBox:{yMin:-125,xMin:0,yMax:800,xMax:875},resolution:1e3,original_font_information:{format:0,copyright:"send bread and water to jason@kottke.org",fontFamily:"Silkscreen",fontSubfamily:"Bold",uniqueID:"kott:Silkscreen Bold",fullName:"Silkscreen Bold",version:"1.0 Sat Aug 21 15:44:44 1999",postScriptName:"Silkscreen-Bold"},cssFontWeight:"bold",cssFontStyle:"normal"}}),define("game/modules/platforms",["./colors","./scene","./font"],function(e,l,t){var i,n,r=new XMLHttpRequest;r.onreadystatechange=function(){4===this.readyState&&(n=i=r.responseText)},r.open("GET","undefined"==typeof gamefile?"dist/game.js":gamefile,!0),r.send(null),t=new THREE.Font(t);var a=function(){var t=new THREE.CubeGeometry(1e3,20,200),i=new THREE.MeshPhongMaterial({color:e.hair,shading:THREE.FlatShading});return startingPlatform=new THREE.Mesh(t,i),startingPlatform.castShadow=!0,startingPlatform.receiveShadow=!0,startingPlatform.position.y=-200,l.scene.add(startingPlatform),startingPlatform},o=30,s=[],m=20,h=70,c=10,d=function(n,r){var a=i.substr(0,c);i=i.substr(c),a=a.replace(/\@/gi,"E").toLowerCase();var o=new THREE.CubeGeometry(60,5,30),m=new THREE.TextGeometry(a,{font:t,size:4,height:18,curveSegments:2}),h=new THREE.Geometry,d=new THREE.Mesh(m),p=new THREE.Mesh(o);d.updateMatrix(),h.merge(d.geometry,d.matrix),p.position.y=1.5,p.position.x=21,p.updateMatrix(),h.merge(p.geometry,p.matrix);var u=new THREE.MeshPhongMaterial({color:e.green,shading:THREE.FlatShading}),f=new THREE.MeshPhongMaterial({color:e.hair,shading:THREE.FlatShading}),x=new THREE.MeshPhongMaterial({color:e.blue,shading:THREE.FlatShading});window.platform=new THREE.Mesh(h,f),platform.action=function(){};var g=!1,E=["function","for","new","window","return"];E.forEach(function(e){a.indexOf(e)>-1&&(g=!0,platform.material=u)});var w=["var","new","interval","timeout","array","call"];return w.forEach(function(e){a.indexOf(e)>-1&&(platform.action=function(){this.position.x=70,this.tween=TweenMax.to(this.position,Math.ceil(5*Math.random()),{x:-100,repeat:-1,yoyo:!0})}.bind(platform),platform.material=x)}),platform.super=g,platform.castShadow=!0,platform.receiveShadow=!0,r?(platform.tempY=n,platform.position.y=-300,platform.position.x=20-~~(90*Math.random()),platform.position.z=-15):(platform.position.y=n,platform.position.x=20-~~(90*Math.random()),platform.position.z=-15),platform.scale.set(.5,1,1),s.push(platform),l.scene.add(platform),platform},p=function(){if(!i)return void setTimeout(p,200);for(var e=0;e<o;e++)d(h+e*m,!0)},u=function(){return i=n,s.forEach(function(e){l.scene.remove(e)}),startingPlatform.position.y=-200,s=[],p(),s};return{addStartingPlatform:a,createPlatform:d,createAll:p,platforms:s,distance:m,resetPlatforms:u}}),define("game/modules/title",["./scene","./font","./colors"],function(e,l,t){l=new THREE.Font(l);var i=new THREE.TextGeometry("codexplorer",{font:l,size:10,height:4,curveSegments:2}),n=new THREE.MeshPhongMaterial({color:t.hair,shading:THREE.FlatShading}),r=new THREE.Mesh(i,n);r.position.y=150,r.position.x=-100;var a=new THREE.TextGeometry("click to play",{font:l,size:8,height:4,curveSegments:2});return window.instructMesh=new THREE.Mesh(a,n),instructMesh.position.y=20,instructMesh.position.x=-10,instructMesh.position.z=-50,{init:function(){e.scene.add(r),e.scene.add(instructMesh)},show:function(){TweenMax.to(r.position,1,{y:150}),TweenMax.to(instructMesh.position,1,{y:20})},hide:function(){TweenMax.to(r.position,1,{y:300}),TweenMax.to(instructMesh.position,1,{y:-250})}}}),define("game/modules/clouds",["./scene","./colors"],function(e,l){var t=function(){for(var t=new THREE.Object3D,n=new THREE.CubeGeometry(30,30,30),r=new THREE.MeshPhongMaterial({color:l.blue,shading:THREE.FlatShading}),a=2+Math.round(4*Math.random()),o=0;o<a;o++){var s=new THREE.Mesh(n,r);s.position.x=15*o,s.position.y=10*Math.random(),s.position.z=10*Math.random();var m=.4+.6*Math.random();s.scale.set(m,m,m),t.add(s)}return t.position.z=-200,t.position.x=150-~~(500*Math.random()),e.scene.add(t),i.push(t),t},i=[],n=5,r=function(){for(var e,l=0;l<n;l++)e=t(),e.position.y=80*l};return{Cloud:t,clouds:i,createAll:r}}),define("game/startup",["./modules/scene","./modules/lights","./modules/player","./modules/platforms","./modules/colors","./modules/title","./modules/clouds"],function(e,l,t,i,n,r,a){function o(e){var l=-1+e.clientX/d.WIDTH*2,t=1-e.clientY/d.HEIGHT*2;x={x:l,y:t}}function s(e,l,t,i,n){var r=Math.max(Math.min(e,t),l),a=t-l,o=(r-l)/a,s=n-i,m=i+o*s;return m}function m(){var e=new Date;if(e-w>y){if(player.isJumping){var l=s(x.x,-1,1,-270,200);l=Math.max(Math.min(l,20),-80),player.checkOrientation(player.mesh.position.x,l),TweenMax.to(player.mesh.position,.2,{x:l}),player.checkJump(),player.moveRest&&(player.jumpSpeed>4.5&&(u+=Math.round(player.jumpSpeed)),i.platforms.forEach(function(e){e.position.y-=player.jumpSpeed}),a.clouds.forEach(function(e){e.position.y-=.5*player.jumpSpeed}),c.position.y-=player.jumpSpeed)}player.isFalling&&player.checkFall(),w=e}if(player.isFalling){var t=new THREE.Raycaster,n=new THREE.Vector3(0,-1,0);t.set(player.mesh.position,n);var r=t.intersectObjects(i.platforms.concat([c]));if(r.length)for(var o=0;o<r.length;o++)if(r[o].distance<player.fallSpeed+1){player.fallStop(),r[o].object.super&&(player.jumpSpeed=12);break}d.camera.updateMatrix(),d.camera.updateMatrixWorld(),d.camera.matrixWorldInverse.getInverse(d.camera.matrixWorld),player.head.updateMatrix(),player.head.updateMatrixWorld();var h=new THREE.Frustum;if(h.setFromMatrix((new THREE.Matrix4).multiplyMatrices(d.camera.projectionMatrix,d.camera.matrixWorldInverse)),h.intersectsObject(player.head)||g(),!h.intersectsObject(i.platforms[0])){var f=i.platforms.shift();f.tween&&f.tween.kill(),d.scene.remove(f);var E=i.createPlatform(i.platforms[i.platforms.length-1].position.y+i.distance);E.action()}if(!h.intersectsObject(a.clouds[0].children[0])){var v=a.clouds.shift();d.scene.remove(v);var _=a.Cloud();_.position.y=a.clouds[a.clouds.length-1].position.y+400+~~(50*Math.random())}}window.clouds=a,d.renderer.render(d.scene,d.camera),requestAnimationFrame(m),p.innerText=u}function h(n){d=e.createScene(),e.scene=d.scene,player=t.createPlayer(),l.createLights(),c=i.addStartingPlatform(),document.addEventListener("mousemove",o,!1),p=document.createElement("div"),p.className="score",p.innerText=u,document.body.appendChild(p),a.createAll(),r.init(),m()}var c,d,l,p,u=0,f=!1,x={x:0,y:0},g=function(){player.isJumping=player.isFalling=!1,player.fallSpeed=player.jumpSpeed=0,TweenMax.to(player.mesh.scale,2,{ease:"Strong.easeOut",z:.45,y:.45,x:.45}),TweenMax.to(player.mesh.position,2,{ease:"Strong.easeOut",z:60,y:65,x:-30}),TweenMax.to(player.mesh.rotation,2,{ease:"Strong.easeOut",y:-.3}),i.platforms.forEach(function(e){TweenMax.to(e.position,2,{ease:"Strong.easeOut",y:-300})}),TweenMax.to(c.position,2,{ease:"Strong.easeOut",y:-300,onComplete:function(){f=!1}}),r.show()},E=function(){f=!0,TweenMax.to(c.position,2,{ease:"Strong.easeOut",y:38,x:-30}),TweenMax.to(player.mesh.scale,2,{ease:"Strong.easeOut",z:.125,y:.125,x:.125}),TweenMax.to(player.mesh.position,2,{ease:"Strong.easeOut",z:0,y:48.5,x:-50}),TweenMax.to(player.mesh.rotation,2,{ease:"Strong.easeOut",y:.9,onComplete:player.jump.bind(player)}),i.platforms.forEach(function(e){TweenMax.to(e.position,2,{ease:"Strong.easeOut",y:e.tempY})}),i.platforms.forEach(function(e){e.action()}),r.hide()},w=new Date,y=1e3/33;document.onclick=function(){f||(u=0,p.innerText=u,i.platforms=i.resetPlatforms(),E())},document.onkeydown=function(e){39===e.keyCode?player.moveRight():37===e.keyCode&&player.moveLeft()},h()});